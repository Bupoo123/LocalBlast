# LocalBlast Windows 可执行文件分发指南

## 📦 给同事的完整安装包

本指南说明如何为同事创建包含所有依赖的Windows可执行文件安装包。

## 🎯 打包步骤（在Windows系统上执行）

### 步骤1：准备环境

1. 确保在**Windows系统**上操作（必须在Windows上打包）
2. 确保已安装Python 3.7+
3. 确保所有依赖已安装：
   ```cmd
   pip install -r requirements.txt
   ```

### 步骤2：运行打包脚本

1. 双击运行 `build_windows_exe.bat`
2. 等待打包完成（可能需要5-10分钟）
3. 打包完成后会生成 `LocalBlast_Windows_Installer_YYYYMMDD` 文件夹

### 步骤3：创建安装包

1. 将生成的文件夹压缩成ZIP文件
2. 文件名建议：`LocalBlast_Windows_v1.0_Installer.zip`
3. 可以添加安装说明文档

## 📋 安装包内容

打包后的文件夹包含：

```
LocalBlast_Windows_Installer_YYYYMMDD/
├── LocalBlast.exe          # 主程序（已包含所有Python依赖）
├── 一键安装.bat            # 环境检查脚本
├── 启动LocalBlast.bat      # 启动程序脚本
├── 使用说明.txt            # 使用说明
├── species_db.json         # 参比序列数据库（128条）
└── templates/              # HTML模板文件夹
    ├── batch_blast.html
    ├── blast_input.html
    ├── user_manual.html
    └── sequence_template.seq
```

## 📝 给同事的安装说明

### 系统要求

1. **Windows 7 或更高版本**（推荐 Windows 10/11）
2. **BLAST+工具**（必须安装，无法打包到exe中）

### 安装步骤

#### 第一步：安装BLAST+工具

1. 访问：https://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/LATEST/
2. 下载Windows版本（如：`ncbi-blast-*-win64.exe`）
3. 运行安装程序
4. **重要**：安装时务必选择 **"Add to PATH"**
5. 验证安装：打开命令提示符，输入 `blastn -version`，应该显示版本信息

#### 第二步：解压并运行

1. **解压文件**
   - 将ZIP文件解压到任意文件夹（如：`C:\LocalBlast`）

2. **运行一键安装脚本**
   - 双击运行 `一键安装.bat`
   - 脚本会自动检查BLAST+是否已安装
   - 如果未安装，会提示安装方法

3. **启动程序**
   - 双击运行 `启动LocalBlast.bat`
   - 等待看到 "服务地址: http://localhost:5001" 提示
   - 在浏览器中打开 **http://localhost:5001**

## ✅ 优势

使用exe打包版本的优势：

- ✅ **不需要安装Python依赖** - 所有Python库已打包在exe中
- ✅ **一键启动** - 双击bat文件即可运行
- ✅ **包含所有文件** - 数据库、模板都已包含
- ✅ **使用简单** - 适合IT基础较弱的用户

## ⚠️ 注意事项

### 必须单独安装的软件

1. **BLAST+工具**（无法打包到exe中）
   - 这是NCBI的外部工具，必须单独安装
   - 下载地址：https://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/LATEST/

### 可选功能

- **PNG生成功能**：需要Chrome浏览器
  - 如果没有Chrome，PNG生成会失败，但HTML文件仍会正常生成

## 🔧 常见问题

### Q1: 双击exe没有反应？

**A:** 
- 检查是否被杀毒软件拦截
- 将exe文件添加到杀毒软件白名单
- 尝试右键"以管理员身份运行"

### Q2: 提示"找不到BLAST+工具"？

**A:**
- 确保BLAST+已安装
- 确保安装时选择了"Add to PATH"
- 打开新的命令提示符窗口测试：`blastn -version`

### Q3: 启动后浏览器无法访问？

**A:**
- 检查防火墙是否阻止了5001端口
- 确保没有其他程序占用5001端口
- 尝试访问 http://127.0.0.1:5001

### Q4: PNG图片生成失败？

**A:**
- 这是正常的，如果系统没有Chrome浏览器
- HTML文件仍会正常生成，可以正常使用
- 如需PNG功能，请安装Chrome浏览器

## 📞 技术支持

如果遇到问题：
1. 查看 `使用说明.txt`
2. 检查错误提示信息
3. 联系技术支持

## 🎉 使用流程

1. **解压文件** → 2. **运行一键安装.bat** → 3. **运行启动LocalBlast.bat** → 4. **打开浏览器访问 http://localhost:5001**

就是这么简单！
